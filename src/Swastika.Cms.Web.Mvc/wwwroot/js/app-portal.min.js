"use strict";function PageDetailsController(e,t,a){var i=this;i.activedPage=null,i.relatedPages=[],i.data=[],i.errors=[],i.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},i.loadPage=function(e){i.isBusy=!0;var t="/api/"+i.currentLanguage+"/page/details/be/"+e;i.settings.method="GET",i.settings.url=t,i.settings.data=i.request,$.ajax(i.settings).done(function(e){e.isSucceed&&(i.activedPage=e.data,i.initEditor()),i.isBusy=!1,i.$apply()})},i.loadPages=function(e){i.isBusy=!0,void 0!=e&&(i.request.pageIndex=e),null!=i.request.fromDate&&(i.request.fromDate=i.request.fromDate.toISOString()),null!=i.request.toDate&&(i.request.toDate=i.request.toDate.toISOString());var t="/api/"+i.currentLanguage+"/page/list";i.settings.method="POST",i.settings.url=t,i.settings.data=i.request,$.ajax(i.settings).done(function(e){i.data=e.data,$.each(i.data.items,function(e,t){$.each(i.activedPages,function(e,a){a.pageId==t.id&&(t.isHidden=!0)})}),i.isBusy=!1,setTimeout(function(){$('[data-toggle="popover"]').popover({html:!0,content:function(){var e=$(this).next(".popover-body");return $(e).html()},title:function(){var e=$(this).attr("data-popover-content");return $(e).children(".popover-heading").html()}})},200),i.$apply()})},i.removePage=function(e){if(confirm("Are you sure!")){var t="/api/"+i.currentLanguage+"/page/delete/"+e;$.ajax({method:"GET",url:t,success:function(e){i.loadPages(),i.$apply()},error:function(e,t,a){console.log(e+" "+t+" "+a)}})}},i.savePage=function(e){var t="/api/"+i.currentLanguage+"/page/save";$.ajax({method:"POST",url:t,data:e,success:function(e){e.isSucceed?alert("success"):alert("failed! "+e.errors)},error:function(e,t,a){console.log(e+" "+t+" "+a)}})},i.changeMedia=function(e){var t=null;void 0==i.activedPage.mediaNavs&&(i.activedPage.mediaNavs=[]),$.each(i.activedPage.mediaNavs,function(a,i){if(i.mediaId==e.id)return i.isActived=e.isActived,t=i,!1}),null==t&&(t={description:"undefined"!=e.description?e.description:"",image:e.fullPath,mediaId:e.id,page:i.activedPage.id,specificulture:e.specificulture,position:0,priority:i.activedMedias.length+1,isActived:!0},e.isHidden=!0,i.activedPage.mediaNavs.push(t))},i.changePage=function(e){var t=null;$.each(i.activedPage.pageNavs,function(a,i){if(i.relatedPageId==e.id)return i.isActived=e.isActived,t=i,!1}),null==t&&(t={relatedPageId:e.id,sourcePageId:$("#page-id").val(),specificulture:e.specificulture,priority:i.activedPage.pageNavs.length+1,page:e,isActived:!0},e.isHidden=!0,i.activedPage.pageNavs.push(t))},i.addProperty=function(e){var t=$(".property").length;$.ajax({method:"GET",url:"/"+i.currentLanguage+"/Portal/"+e+"/AddEmptyProperty/"+t,success:function(e){$("#tbl-properties > tbody").append(e),$(e).find(".prop-data-type").trigger("change")},error:function(e,t,a){console.log(e+" "+t+" "+a)}}),i.updateHero=function(e,t,a){e[t]=a},i.deleteHero=function(e){var t=i.list.indexOf(e);t>=0&&i.list.splice(t,1)}},angular.module(appName).component("pageDetails",{templateUrl:"pageDetails.html",controller:PageDetailsController})}function ProductDetailsController(e,t,a){var i=this;i.activedProduct=null,i.relatedProducts=[],i.data=[],i.errors=[],i.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},i.loadProduct=function(e){i.isBusy=!0;var t="/api/"+i.currentLanguage+"/product/details/be/"+e;i.settings.method="GET",i.settings.url=t,i.settings.data=i.request,$.ajax(i.settings).done(function(e){e.isSucceed&&(i.activedProduct=e.data,i.initEditor()),i.isBusy=!1,i.$apply()})},i.loadProducts=function(e){i.isBusy=!0,void 0!=e&&(i.request.pageIndex=e),null!=i.request.fromDate&&(i.request.fromDate=i.request.fromDate.toISOString()),null!=i.request.toDate&&(i.request.toDate=i.request.toDate.toISOString());var t="/api/"+i.currentLanguage+"/product/list";i.settings.method="POST",i.settings.url=t,i.settings.data=i.request,$.ajax(i.settings).done(function(e){i.data=e.data,$.each(i.data.items,function(e,t){$.each(i.activedProducts,function(e,a){a.productId==t.id&&(t.isHidden=!0)})}),i.isBusy=!1,setTimeout(function(){$('[data-toggle="popover"]').popover({html:!0,content:function(){var e=$(this).next(".popover-body");return $(e).html()},title:function(){var e=$(this).attr("data-popover-content");return $(e).children(".popover-heading").html()}})},200),i.$apply()})},i.removeProduct=function(e){if(confirm("Are you sure!")){var t="/api/"+i.currentLanguage+"/product/delete/"+e;$.ajax({method:"GET",url:t,success:function(e){i.loadProducts(),i.$apply()},error:function(e,t,a){console.log(e+" "+t+" "+a)}})}},i.saveProduct=function(e){var t="/api/"+i.currentLanguage+"/product/save";$.ajax({method:"POST",url:t,data:e,success:function(e){e.isSucceed?alert("success"):alert("failed! "+e.errors)},error:function(e,t,a){console.log(e+" "+t+" "+a)}})},i.changeMedia=function(e){var t=null;void 0==i.activedProduct.mediaNavs&&(i.activedProduct.mediaNavs=[]),$.each(i.activedProduct.mediaNavs,function(a,i){if(i.mediaId==e.id)return i.isActived=e.isActived,t=i,!1}),null==t&&(t={description:"undefined"!=e.description?e.description:"",image:e.fullPath,mediaId:e.id,product:i.activedProduct.id,specificulture:e.specificulture,position:0,priority:i.activedMedias.length+1,isActived:!0},e.isHidden=!0,i.activedProduct.mediaNavs.push(t))},i.changeProduct=function(e){var t=null;$.each(i.activedProduct.productNavs,function(a,i){if(i.relatedProductId==e.id)return i.isActived=e.isActived,t=i,!1}),null==t&&(t={relatedProductId:e.id,sourceProductId:$("#product-id").val(),specificulture:e.specificulture,priority:i.activedProduct.productNavs.length+1,product:e,isActived:!0},e.isHidden=!0,i.activedProduct.productNavs.push(t))},i.addProperty=function(e){var t=$(".property").length;$.ajax({method:"GET",url:"/"+i.currentLanguage+"/Portal/"+e+"/AddEmptyProperty/"+t,success:function(e){$("#tbl-properties > tbody").append(e),$(e).find(".prop-data-type").trigger("change")},error:function(e,t,a){console.log(e+" "+t+" "+a)}}),i.updateHero=function(e,t,a){e[t]=a},i.deleteHero=function(e){var t=i.list.indexOf(e);t>=0&&i.list.splice(t,1)}},angular.module(appName).component("productDetails",{templateUrl:"productDetails.html",controller:ProductDetailsController})}app.controller("AppSettingsController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","CommonServices","AppSettingsServices",function(e,t,a,i,r,o,n,s,u){e.appSettings=null,e.errors=[],e.statuses=a.swStatus,e.getAppSettings=async function(a){t.isBusy=!0;var i=await u.getAppSettings();i&&i.isSucceed?(e.appSettings=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.loadAppSettings=async function(){t.isBusy=!0;i.id;var a=await u.getAppSettings();a.isSucceed?(e.appSettings=a.data,t.isBusy=!1,e.$apply()):(t.showErrors(a.errors),t.isBusy=!1,e.$apply());var r=await s.getSettings();r.isSucceed?(e.settings=r.data,t.isBusy=!1,e.$apply()):t.isBusy=!1},e.saveAppSettings=async function(a){t.isBusy=!0;var i=await u.saveAppSettings(a);i&&i.isSucceed?(e.appSettings=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),e.$apply())}}]),app.factory("AppSettingsServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={};t.settings;return i.getAppSettings=async function(){var e={method:"GET",url:"/api/portal/app-settings/details"};return await a.getApiResult(e)},i.saveAppSettings=async function(e){var t={method:"POST",url:"/api/portal/app-settings/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("ArticleController",["$scope","$rootScope","ngAppSettings","$routeParams","$location","ArticleServices",function(e,t,a,i,r,o){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"CreatedDateTime",direction:"1",fromDate:null,toDate:null,keyword:""},e.activedArticle=null,e.relatedArticles=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.loadArticle=async function(){t.isBusy=!0;var a=i.id,r=await o.getArticle(a,"be");r.isSucceed?(e.activedArticle=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadArticles=async function(a){if(void 0!==a&&(e.request.pageIndex=a),null!==e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!==e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString());var r=await o.getArticles(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedArticles,function(e,t){t.articleId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.removeArticle=function(a){t.showConfirm(e,"removeArticleConfirmed",[a],null,"Remove Article","Are you sure")},e.removeArticleConfirmed=async function(a){t.isBusy=!0;var i=await o.removeArticle(a);i.isSucceed?e.loadArticles():(t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.saveArticle=async function(a){a.content=$(".editor-content").val(),t.isBusy=!0;var i=await o.saveArticle(a);i&&i.isSucceed?(e.activedArticle=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,r.path("/backend/article/list"),e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}}]),app.factory("ArticleServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.getArticle=async function(e,t){var i="/api/"+r.lang+"/article/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initArticle=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/article/init/"+e};return await a.getApiResult(t)},i.getArticles=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/article/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeArticle=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/article/delete/"+e};return await a.getApiResult(t)},i.saveArticle=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/article/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("CultureController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","CultureServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"Priority",direction:"0",fromDate:null,toDate:null,keyword:""},e.cultures=[{specificulture:"en-us",fullName:"United States - English (Default)",icon:"flag-icon-us"},{specificulture:"fr-dz",fullName:"Algeria - Français",icon:"flag-icon-dz"},{specificulture:"es-ar",fullName:"Argentina - Español",icon:"flag-icon-ar"},{specificulture:"en-au",fullName:"Australia - English",icon:"flag-icon-au"},{specificulture:"nl-be",fullName:"België - Nederlands",icon:"flag-icon-be"},{specificulture:"fr-be",fullName:"Belgique - Français",icon:"flag-icon-be"},{specificulture:"es-bo",fullName:"Bolivia - Español",icon:"flag-icon-bo"},{specificulture:"bs-ba",fullName:"Bosna i Hercegovina – Bosanski",icon:"flag-icon-ba"},{specificulture:"pt-br",fullName:"Brasil - Português",icon:"flag-icon-br"},{specificulture:"en-ca",fullName:"Canada - English",icon:"flag-icon-ca"},{specificulture:"fr-ca",fullName:"Canada - Français",icon:"flag-icon-ca"},{specificulture:"cs-cz",fullName:"Česká Republika - Čeština",icon:"flag-icon-cz"},{specificulture:"es-cl",fullName:"Chile - Español",icon:"flag-icon-cl"},{specificulture:"es-co",fullName:"Colombia - Español",icon:"flag-icon-co"},{specificulture:"es-cr",fullName:"Costa Rica - Español",icon:"flag-icon-cr"},{specificulture:"sr-latn-me",fullName:"Crna Gora - Srpski",icon:"flag-icon-me"},{specificulture:"en-cy",fullName:"Cyprus - English",icon:"flag-icon-cy"},{specificulture:"da-dk",fullName:"Danmark - Dansk",icon:"flag-icon-dk"},{specificulture:"de-de",fullName:"Deutschland - Deutsch",icon:"flag-icon-de"},{specificulture:"es-ec",fullName:"Ecuador - Español",icon:"flag-icon-ec"},{specificulture:"et-ee",fullName:"Eesti - Eesti",icon:"flag-icon-ee"},{specificulture:"en-eg",fullName:"Egypt - English",icon:"flag-icon-eg"},{specificulture:"es-sv",fullName:"El Salvador - Español",icon:"flag-icon-sv"},{specificulture:"es-es",fullName:"España - Español",icon:"flag-icon-es"},{specificulture:"fr-fr",fullName:"France - Français",icon:"flag-icon-fr"},{specificulture:"es-gt",fullName:"Guatemala - Español",icon:"flag-icon-gt"},{specificulture:"en-gulf",fullName:"Gulf - English",icon:"flag-icon-lf"},{specificulture:"es-hn",fullName:"Honduras - Español",icon:"flag-icon-hn"},{specificulture:"en-hk",fullName:"Hong Kong SAR - English",icon:"flag-icon-hk"},{specificulture:"hr-hr",fullName:"Hrvatska - Hrvatski",icon:"flag-icon-hr"},{specificulture:"en-in",fullName:"India - English",icon:"flag-icon-in"},{specificulture:"id-id",fullName:"Indonesia - Bahasa Indonesia",icon:"flag-icon-id"},{specificulture:"en-ie",fullName:"Ireland - English",icon:"flag-icon-ie"},{specificulture:"is-is",fullName:"Ísland - Íslenska",icon:"flag-icon-is"},{specificulture:"it-it",fullName:"Italia - Italiano",icon:"flag-icon-it"},{specificulture:"en-jo",fullName:"Jordan - English",icon:"flag-icon-jo"},{specificulture:"lv-lv",fullName:"Latvija - Latviešu",icon:"flag-icon-lv"},{specificulture:"en-lb",fullName:"Lebanon - English",icon:"flag-icon-lb"},{specificulture:"lt-lt",fullName:"Lietuva - Lietuvių",icon:"flag-icon-lt"},{specificulture:"hu-hu",fullName:"Magyarország - Magyar",icon:"flag-icon-hu"},{specificulture:"en-my",fullName:"Malaysia - English",icon:"flag-icon-my"},{specificulture:"en-mt",fullName:"Malta - English",icon:"flag-icon-mt"},{specificulture:"es-mx",fullName:"México - Español",icon:"flag-icon-mx"},{specificulture:"fr-ma",fullName:"Morocco - Français",icon:"flag-icon-ma"},{specificulture:"nl-nl",fullName:"Nederland - Nederlands",icon:"flag-icon-nl"},{specificulture:"en-nz",fullName:"New Zealand - English",icon:"flag-icon-nz"},{specificulture:"es-ni",fullName:"Nicaragua - Español",icon:"flag-icon-ni"},{specificulture:"en-ng",fullName:"Nigeria - English",icon:"flag-icon-ng"},{specificulture:"nb-no",fullName:"Norge - Bokmål",icon:"flag-icon-no"},{specificulture:"de-at",fullName:"Österreich - Deutsch",icon:"flag-icon-at"},{specificulture:"en-pk",fullName:"Pakistan - English",icon:"flag-icon-pk"},{specificulture:"es-pa",fullName:"Panamá - Español",icon:"flag-icon-pa"},{specificulture:"es-py",fullName:"Paraguay - Español",icon:"flag-icon-py"},{specificulture:"es-pe",fullName:"Perú - Español",icon:"flag-icon-pe"},{specificulture:"en-ph",fullName:"Philippines - English",icon:"flag-icon-ph"},{specificulture:"pl-pl",fullName:"Polska - Polski",icon:"flag-icon-pl"},{specificulture:"pt-pt",fullName:"Portugal - Português",icon:"flag-icon-pt"},{specificulture:"es-pr",fullName:"Puerto Rico - Español",icon:"flag-icon-pr"},{specificulture:"es-do",fullName:"República Dominicana - Español",icon:"flag-icon-do"},{specificulture:"ro-md",fullName:"Republica Moldova - Română",icon:"flag-icon-md"},{specificulture:"ro-ro",fullName:"România - Română",icon:"flag-icon-ro"},{specificulture:"en-sa",fullName:"Saudi Arabia - English",icon:"flag-icon-sa"},{specificulture:"de-ch",fullName:"Schweiz - Deutsch",icon:"flag-icon-ch"},{specificulture:"en-sg",fullName:"Singapore - English",icon:"flag-icon-sg"},{specificulture:"sl-si",fullName:"Slovenija - Slovenščina",icon:"flag-icon-si"},{specificulture:"sk-sk",fullName:"Slovensko - Slovenčina",icon:"flag-icon-sk"},{specificulture:"en-za",fullName:"South Africa - English",icon:"flag-icon-za"},{specificulture:"sr-latn-rs",fullName:"Srbija - Srpski",icon:"flag-icon-rs"},{specificulture:"en-lk",fullName:"Sri Lanka - English",icon:"flag-icon-lk"},{specificulture:"fr-ch",fullName:"Suisse - Français",icon:"flag-icon-ch"},{specificulture:"fi-fi",fullName:"Suomi - Suomi",icon:"flag-icon-fi"},{specificulture:"sv-se",fullName:"Sverige - Svenska",icon:"flag-icon-se"},{specificulture:"fr-tn",fullName:"Tunisia - Français",icon:"flag-icon-tn"},{specificulture:"tr-tr",fullName:"Türkiye - Türkçe",icon:"flag-icon-tr"},{specificulture:"en-gb",fullName:"United Kingdom - English",icon:"flag-icon-gb"},{specificulture:"en-us",fullName:"United States - English",icon:"flag-icon-us"},{specificulture:"es-uy",fullName:"Uruguay - Español",icon:"flag-icon-uy"},{specificulture:"es-ve",fullName:"Venezuela - Español",icon:"flag-icon-ve"},{specificulture:"vi-vn",fullName:"Việt Nam - Tiếng việt",icon:"flag-icon-vn"},{specificulture:"el-gr",fullName:"Ελλάδα - Ελληνικά",icon:"flag-icon-gr"},{specificulture:"ru-by",fullName:"Беларусь - Беларуская",icon:"flag-icon-by"},{specificulture:"bg-bg",fullName:"България - Български",icon:"flag-icon-bg"},{specificulture:"ru-kz",fullName:"Казахстан - Русский",icon:"flag-icon-kz"},{specificulture:"ru-ru",fullName:"Россия - Русский",icon:"flag-icon-ru"},{specificulture:"uk-ua",fullName:"Україна - Українська",icon:"flag-icon-ua"},{specificulture:"he-il",fullName:"ישראל - עברית",icon:"flag-icon-il"},{specificulture:"ar-iq",fullName:"العراق - العربية",icon:"flag-icon-iq"},{specificulture:"ar-sa",fullName:"المملكة العربية السعودية - العربية",icon:"flag-icon-sa"},{specificulture:"ar-ly",fullName:"ليبيا - العربية",icon:"flag-icon-ly"},{specificulture:"ar-eg",fullName:"مصر - العربية",icon:"flag-icon-eg"},{specificulture:"ar-gulf",fullName:"دول الخليج - العربية",icon:"flag-icon-lf"},{specificulture:"th-th",fullName:"ไทย - ไทย",icon:"flag-icon-th"},{specificulture:"ko-kr",fullName:"대한민국 - 한국어",icon:"flag-icon-kr"},{specificulture:"zh-cn",fullName:"中国 - 简体中文",icon:"flag-icon-cn"},{specificulture:"zh-tw",fullName:"台灣 - 繁體中文",icon:"flag-icon-tw"},{specificulture:"ja-jp",fullName:"日本 - 日本語",icon:"flag-icon-jp"},{specificulture:"zh-hk",fullName:"香港特別行政區 - 繁體中文",icon:"flag-icon-hk"}],e.icons=["flag-icon-us","flag-icon-vn","flag-icon-gb","flag-icon-fr","flag-icon-cn","flag-icon-be"],e.activedCulture=null,e.relatedCultures=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.getCulture=async function(a){t.isBusy=!0;var i=await s.getCulture(a,"be");i&&i.isSucceed?(e.activedCulture=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.syncTemplates=async function(a){t.isBusy=!0;var i=await s.syncTemplates(a);i.isSucceed?(e.activedCulture=i.data,t.isBusy=!1,e.$apply()):(t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.loadCulture=async function(){t.isBusy=!0;var a=i.id,r=await s.getCulture(a,"be");r.isSucceed?(e.activedCulture=r.data,a||(e.activedCulture.icon=e.icons[0]),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadCultures=async function(a){if(void 0!=a&&(e.request.pageIndex=a),null!=e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!=e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString()),t.isBusy=!0;var r=await s.getCultures(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedCultures,function(e,t){t.cultureId==a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.saveCulture=async function(a){a.content=$(".editor-content").val(),t.isBusy=!0;var i=await s.saveCulture(a);i&&i.isSucceed?(e.activedCulture=i.data,t.showMessage("success","success"),t.isBusy=!1,t.updateSettings(),window.location.href="/backend/culture/list",t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.removeCulture=function(a){t.showConfirm(e,"removeCultureConfirmed",[a],null,"Remove Culture","Are you sure")},e.removeCultureConfirmed=async function(a){t.isBusy=!0,(await s.removeCulture(a)).isSucceed?(t.updateSettings(),window.location.href="/backend/culture/list"):(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.changeIcon=function(t){e.activedCulture.icon=t}}]),app.factory("CultureServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={};return i.syncTemplates=async function(e){var t={method:"GET",url:"/api/culture/sync/"+e};return await a.getApiResult(t)},i.getCulture=async function(e,t){var i="/api/culture/details/"+t;e&&(i+="/"+e);var r={method:"GET",url:i};return await a.getApiResult(r)},i.initCulture=async function(e){var t={method:"GET",url:"/api/culture/init/"+e};return await a.getApiResult(t)},i.getCultures=async function(e){var t={method:"POST",url:"/api/culture/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeCulture=async function(e){var t={method:"GET",url:"/api/culture/delete/"+e};return await a.getApiResult(t)},i.saveCulture=async function(e){var t={method:"POST",url:"/api/culture/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("ConfigurationController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","ConfigurationServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"CreatedDateTime",direction:"1",fromDate:null,toDate:null,keyword:""},e.configurationFile={file:null,fullPath:"",folder:"Configuration",title:"",description:""},e.dataTypes=a.editorConfigurations.dataTypes,e.activedConfiguration=null,e.relatedConfigurations=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.initEditors=function(){t.initEditor()},e.getConfiguration=async function(a){t.isBusy=!0;var i=await s.getConfiguration(a,"be");i&&i.isSucceed?(e.activedConfiguration=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.loadConfiguration=async function(){t.isBusy=!0;var a=i.id,r=await s.getConfiguration(a,"be");r.isSucceed?(e.activedConfiguration=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadConfigurations=async function(a){void 0!=a&&(e.request.pageIndex=a),t.isBusy=!0;var i=await s.getConfigurations(e.request);i&&i.isSucceed?(e.data=i.data,$.each(e.data.items,function(t,a){$.each(e.activedConfigurations,function(e,t){t.configurationId==a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.removeConfiguration=function(a){t.showConfirm(e,"removeConfigurationConfirmed",[a],null,"Remove Configuration","Are you sure")},e.removeConfigurationConfirmed=async function(a){t.isBusy=!0;var i=await s.removeConfiguration(a);i.isSucceed?e.loadConfigurations():(t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.saveConfiguration=async function(a){a.content=$(".editor-content").val(),a.dataType=a.property.dataType,t.isBusy=!0;var i=await s.saveConfiguration(a);i&&i.isSucceed?(e.activedConfiguration=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}}]),app.factory("ConfigurationServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.getConfiguration=async function(e,t){var i="/api/"+r.lang+"/configuration/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initConfiguration=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/configuration/init/"+e};return await a.getApiResult(t)},i.getConfigurations=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/configuration/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeConfiguration=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/configuration/delete/"+e};return await a.getApiResult(t)},i.saveConfiguration=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/configuration/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i.uploadConfiguration=async function(e){if(void 0!==e.file&&null!==e.file){var t=new FormData;t.append(e.file.name,e.file),t.append("fileFolder",e.folder),t.append("title",e.title),t.append("description",e.description);var i={url:"/api/"+r.lang+"/configuration/upload",type:"POST",headers:{},contentType:!1,processData:!1,data:t};return await a.getApiResult(i)}},i}]),app.controller("DashboardController",["$scope","$rootScope","ngAppSettings","$timeout","$location","DashboardServices",function(e,t,a,i,r,o){e.pageClass="page-dashboard",$(".side-nav li").removeClass("active"),$(".side-nav .page-dashboard").addClass("active"),e.data={totalPage:0,totalArticle:0,totalProduct:0,totalUser:0},e.users=[],e.$on("$viewContentLoaded",function(){t.isBusy=!1}),e.getDashboardInfo=async function(){t.isBusy=!0;var a=await o.getDashboardInfo();a.isSucceed?(e.data=a.data,t.isBusy=!1,e.$apply()):(t.showErrors(a.errors),t.isBusy=!1,e.$apply())}}]),app.factory("DashboardServices",["$http","CommonServices",function(e,t){var a={};return a.getDashboardInfo=async function(){var e={method:"GET",url:"/api/portal/dashboard"};return await t.getApiResult(e)},a}]),app.controller("loginController",["$rootScope","$scope","ngAppSettings","$location","AuthService","ngAppSettings",function(e,t,a,i,r,o){r.authentication.isAuth&&r.authentication.isAdmin&&(r.authentication.referredUrl=i.path(),i.path("/backend")),t.pageClass="page-login",t.loginData={username:"",password:"",rememberme:!1},t.message="",t.$on("$viewContentLoaded",function(){e.isBusy=!1}),t.login=async function(){"/backend/login"==r.authentication.referredUrl&&(r.authentication.referredUrl="/backend"),e.isBusy=!0,await r.login(t.loginData)&&(e.isBusy=!1,t.$apply())},t.authExternalProvider=function(e){var a=location.protocol+"//"+location.host+"/authcomplete.html",i=o.apiServiceBaseUri+"api/Account/ExternalLogin?provider="+e+"&response_type=token&client_id="+o.clientId+"&redirect_uri="+a;window.$windowScope=t;window.open(i,"Authenticate Account","location=0,status=0,width=600,height=750")},t.authCompletedCB=function(e){t.$apply(function(){if("False"==e.haslocalaccount)r.logOut(),r.externalAuthData={provider:e.provider,userName:e.external_user_name,externalAccessToken:e.external_access_token},i.path("/associate");else{var a={provider:e.provider,externalAccessToken:e.external_access_token};r.obtainAccessToken(a).then(function(e){i.path("/orders")},function(e){t.message=e.error_description})}})}}]),app.controller("FileController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","FileServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"CreatedDateTime",direction:"1",fromDate:null,toDate:null,keyword:"",key:""},e.activedFile=null,e.relatedFiles=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.loadFile=async function(){t.isBusy=!0,e.listUrl="/backend/file/list?folder="+i.folder,t.isBusy=!0;var a=await s.getFile(i.folder,i.filename);a.isSucceed?(e.activedFile=a.data,t.isBusy=!1,e.$apply(),t.initEditor()):(t.showErrors(a.errors),t.isBusy=!1,e.$apply())},e.loadFiles=async function(a){a?(e.request.key+=""!=e.request.key?"/":"",e.request.key+=a):e.request.key=i.folder?i.folder:"",t.isBusy=!0;var r=await s.getFiles(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedFiles,function(e,t){t.fileId==a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.removeFile=async function(a){if(confirm("Are you sure!")){t.isBusy=!0;var i=await s.removeFile(a);i&&i.isSucceed?e.loadFiles():(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}},e.saveFile=async function(a){a.content=$(".code-content").val(),t.isBusy=!0;var i=await s.saveFile(a);i&&i.isSucceed?(e.activedFile=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}}]),app.factory("FileServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={};t.settings;return i.getFile=async function(e,t){var i={method:"GET",url:"/api/file/details?folder="+e+"&filename="+t};return await a.getApiResult(i)},i.initFile=async function(e){var t={method:"GET",url:"/api/file/init/"+e};return await a.getApiResult(t)},i.getFiles=async function(e){var t={method:"POST",url:"/api/file/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeFile=async function(e){var t={method:"GET",url:"/api/file/delete/"+e};return await a.getApiResult(t)},i.saveFile=async function(e){var t={method:"POST",url:"/api/file/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("LanguageController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","LanguageServices","CommonServices","TranslatorService",function(e,t,a,i,r,o,n,s,u,l){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"CreatedDateTime",direction:"1",fromDate:null,toDate:null,keyword:""},e.languageFile={file:null,fullPath:"",folder:"Language",title:"",description:""},e.cates=[{title:"Common",prefix:""},{title:"Portal",prefix:"portal_"},{title:"Frontend",prefix:"fe_"}],e.cate=e.cates[0],e.dataTypes=a.editorConfigurations.dataTypes,e.activedLanguage=null,e.relatedLanguages=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.initEditors=function(){t.initEditor()},e.getLanguage=async function(a){t.isBusy=!0;var i=await s.getLanguage(a,"be");i&&i.isSucceed?(e.activedLanguage=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.loadLanguage=async function(){t.isBusy=!0;var a=i.id,r=await s.getLanguage(a,"/api");r.isSucceed?(e.activedLanguage=r.data,a||(e.activedLanguage.category="Common"),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadLanguages=async function(a){void 0!=a&&(e.request.pageIndex=a),t.isBusy=!0;var i=await s.getLanguages(e.request);i&&i.isSucceed?(e.data=i.data,$.each(e.data.items,function(t,a){$.each(e.activedLanguages,function(e,t){t.languageId==a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.removeLanguage=function(a){t.showConfirm(e,"removeLanguageConfirmed",[a],null,"Remove Language","Are you sure")},e.removeLanguageConfirmed=async function(a){t.isBusy=!0,(await s.removeLanguage(a)).isSucceed?(u.removeTranslator(),e.loadLanguages()):(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.saveLanguage=async function(a){a.content=$(".editor-content").val(),a.dataType=a.property.dataType;var i=await s.saveLanguage(a);i&&i.isSucceed?(e.activedLanguage=i.data,u.removeTranslator(),t.showMessage("success","success"),l.reset(t.settings.lang).then(function(){window.location.href="/backend/language/list"})):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.generateDefault=function(t,a){i.id||(e.activedLanguage.defaultValue=t,e.activedLanguage.keyword=a.prefix+t.replace(/[^a-zA-Z0-9]+/g,"_").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/([0-9])([^0-9])/g,"$1-$2").replace(/([^0-9])([0-9])/g,"$1-$2").replace(/-+/g,"_").toLowerCase())}}]),app.factory("LanguageServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.getLanguage=async function(e,t){var i="/api/"+r.lang+"/language/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initLanguage=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/language/init/"+e};return await a.getApiResult(t)},i.getLanguages=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/language/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeLanguage=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/language/delete/"+e};return await a.getApiResult(t)},i.saveLanguage=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/language/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i.uploadLanguage=async function(e){if(void 0!==e.file&&null!==e.file){var t=new FormData;t.append(e.file.name,e.file),t.append("fileFolder",e.folder),t.append("title",e.title),t.append("description",e.description);var i={url:"/api/"+r.lang+"/language/upload",type:"POST",headers:{},contentType:!1,processData:!1,data:t};return await a.getApiResult(i)}},i}]),app.controller("ModuleController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","ModuleServices","ModuleDataServices",function(e,t,a,i,r,o,n,s,u){e.request=a.request,e.defaultAttr={name:"",options:[],priority:0,dataType:0,isGroupBy:!1,isSelect:!1,isDisplay:!0,width:3},e.dataTypes=a.editorConfigurations.dataTypes,e.activedModule=null,e.relatedModules=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.getModule=async function(a){t.isBusy=!0;var i=await s.getModule(a,"be");i&&i.isSucceed?(e.activedModule=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.initModule=function(){t.isBusy||(t.isBusy=!0,s.initModule("be").then(function(a){a.isSucceed&&(e.activedModule=a.data,t.initEditor()),t.isBusy=!1,e.$apply()}).error(function(a,i,r){errors.push(a,i,r),t.isBusy=!1,e.$apply()}))},e.loadModule=async function(){t.isBusy=!0;var a=i.id,r=await s.getModule(a,"be");r.isSucceed?(e.activedModule=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),o.path("/backend/module/list/"),t.isBusy=!1,e.$apply())},e.loadModuleDatas=async function(){t.isBusy=!0;var a=i.id,r=await s.getModule(a,"fe");r.isSucceed?(e.activedModule=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadMoreModuleDatas=async function(a){if(e.request.key=e.activedModule.id,void 0!==a&&(e.request.pageIndex=a),null!==e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!==e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString()),t.isBusy=!0;var r=await u.getModuleDatas(e.request);r&&r.isSucceed?(e.activedModule.data=r.data,t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadModules=async function(a){if(void 0!==a&&(e.request.pageIndex=a),null!==e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!==e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString()),t.isBusy=!0;var r=await s.getModules(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedModules,function(e,t){t.moduleId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.removeModule=function(a){t.showConfirm(e,"removeModuleConfirmed",[a],null,"Remove Module","Are you sure")},e.removeModuleConfirmed=async function(a){t.isBusy=!0,(await s.removeModule(a)).isSucceed?e.loadModules():(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.saveModule=async function(a){a.description=$(".editor-content").val(),t.isBusy=!0;var r=await s.saveModule(a);r&&r.isSucceed?(e.activedModule=r.data,t.showMessage("Thành công","success"),t.isBusy=!1,i.id||o.path("/backend/module/list/"),e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.addAttr=function(){if(e.activedModule){var t=angular.copy(e.defaultAttr);e.activedModule.columns.push(t)}},e.addOption=function(e,t){var a=angular.element("#option_"+t).val();e.options.push(a),angular.element("#option_"+t).val("")},e.generateName=function(e){e.name=e.title.replace(/[^a-zA-Z0-9]+/g,"_").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/([0-9])([^0-9])/g,"$1-$2").replace(/([^0-9])([0-9])/g,"$1-$2").replace(/-+/g,"_").toLowerCase()},e.removeAttr=function(t){e.activedModule&&e.activedModule.columns.splice(t,1)},e.removeData=function(a){e.activedModule&&t.showConfirm(e,"removeDataConfirmed",[a],null,"Remove Data","Are you sure")},e.removeDataConfirmed=async function(a){t.isBusy=!0,(await u.removeModuleData(a)).isSucceed?e.loadModuleDatas():(t.showMessage("failed"),t.isBusy=!1,e.$apply())}}]),app.factory("ModuleServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.getModule=async function(e,t){var i="/api/"+r.lang+"/module/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initModule=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/module/init/"+e};return await a.getApiResult(t)},i.getModules=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/module/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeModule=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/module/delete/"+e};return await a.getApiResult(t)},i.saveModule=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/module/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("PageController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","PageServices",function(e,t,a,i,r,o,n,s){e.request=a.request,e.activedPage=null,e.relatedPages=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.getPage=async function(a){t.isBusy=!0;var i=await s.getPage(a,"be");i&&i.isSucceed?(e.activedPage=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.initPage=function(){t.isBusy||(t.isBusy=!0,s.initPage("be").then(function(a){a.isSucceed&&(e.activedPage=a.data,t.initEditor()),t.isBusy=!1,t.isBusy=!1,e.$apply()}).error(function(e,a,i){errors.push(e,a,i),t.isBusy=!1}))},e.loadPage=async function(){t.isBusy=!0;var a=i.id;t.isBusy=!0;var r=await s.getPage(a,"be");r.isSucceed?(e.activedPage=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadPageDatas=async function(){t.isBusy=!0;var a=i.id,r=await s.getPage(a,"fe");r.isSucceed?(e.activedPage=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadPages=async function(a){if(void 0!==a&&(e.request.pageIndex=a),null!==e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!==e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString());var r=await s.getPages(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedPages,function(e,t){t.pageId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.removePage=function(a){t.showConfirm(e,"removePageConfirmed",[a],null,"Remove Page","Are you sure")},e.removePageConfirmed=async function(a){t.isBusy=!0,(await s.removePage(a)).isSucceed?e.loadPages():(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.savePage=async function(a){a.content=$(".editor-content").val(),t.isBusy=!0;var i=await s.savePage(a);i&&i.isSucceed?(e.activedPage=i.data,t.showMessage("success","success"),t.isBusy=!1,o.path("/backend/page/list"),e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}}]),app.factory("PageServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={};return i.getPage=async function(e,i){var r="/api/"+t.settings.lang+"/page/details/"+i;e&&(r+="/"+e);var o={method:"GET",url:r};return await a.getApiResult(o)},i.initPage=async function(e){var i={method:"GET",url:"/api/"+t.settings.lang+"/page/init/"+e};return await a.getApiResult(i)},i.getPages=async function(e){var i={method:"POST",url:"/api/"+t.settings.lang+"/page/list/0",data:JSON.stringify(e)};return await a.getApiResult(i)},i.removePage=async function(e){var i={method:"GET",url:"/api/"+t.settings.lang+"/page/delete/"+e};return await a.getApiResult(i)},i.savePage=async function(e){var i={method:"POST",url:"/api/"+t.settings.lang+"/page/save",data:JSON.stringify(e)};return await a.getApiResult(i)},i}]),app.controller("PortalPageController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","PortalPageServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"Priority",direction:"0",fromDate:null,toDate:null,keyword:"",key:"fe"},e.activedPage=null,e.relatedPages=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=t.range,e.getPage=async function(a){t.isBusy=!0;var i=await s.getPage(a,"be");i&&i.isSucceed?(e.activedPage=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.initPage=function(){t.isBusy||(t.isBusy=!0,s.initPage("be").then(function(a){a.isSucceed&&(e.activedPage=a.data,t.initEditor()),t.isBusy=!1,t.isBusy=!1,e.$apply()}).error(function(e,a,i){errors.push(e,a,i),t.isBusy=!1}))},e.loadPage=async function(){t.isBusy=!0;var a=i.id;t.isBusy=!0;var r=await s.getPage(a,"be");r.isSucceed?(e.activedPage=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadPages=async function(a){if(void 0!==a&&(e.request.pageIndex=a),null!==e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!==e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString());var r=await s.getPages(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedPages,function(e,t){t.pageId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.removePage=function(a){t.showConfirm(e,"removePageConfirmed",[a],null,"Remove Page","Are you sure")},e.removePageConfirmed=async function(a){t.isBusy=!0,(await s.removePage(a)).isSucceed?e.loadPages():(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.savePage=async function(a){a.content=$(".editor-content").val(),t.isBusy=!0;var i=await s.savePage(a);i&&i.isSucceed?(e.activedPage=i.data,t.showMessage("success","success"),t.isBusy=!1,o.path("/backend/portal-page/list"),e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}}]),app.factory("PortalPageServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={};return i.getPage=async function(e,t){var i="/api/portal-page/details/"+t;e&&(i+="/"+e);var r={method:"GET",url:i};return await a.getApiResult(r)},i.initPage=async function(e){var t={method:"GET",url:"/api/portal-page/init/"+e};return await a.getApiResult(t)},i.getPages=async function(e){var t={method:"POST",url:"/api/portal-page/list/0",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removePage=async function(e){var t={method:"GET",url:"/api/portal-page/delete/"+e};return await a.getApiResult(t)},i.savePage=async function(e){var t={method:"POST",url:"/api/portal-page/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("ProductController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","ProductServices","ngAppSettings",function(e,t,a,i,r,o,n,s){e.request=a.request,e.activedProduct=null,e.relatedProducts=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0,items:[]},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.loadProduct=async function(){t.isBusy=!0;var a=i.id,r=await s.getProduct(a,"be");r.isSucceed?(e.activedProduct=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadProducts=async function(a){if(void 0!==a&&(e.request.pageIndex=a),null!==e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!==e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString()),t.isBusy=!0;var r=await s.getProducts(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedProducts,function(e,t){t.productId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.removeProduct=function(a){t.showConfirm(e,"removeProductConfirmed",[a],null,"Remove Product","Are you sure")},e.removeProductConfirmed=async function(a){t.isBusy=!0,(await s.removeProduct(a)).isSucceed?e.loadProducts():(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.saveProduct=async function(a){a.content=$(".editor-content.content").val(),a.excerpt=$(".editor-content.excerpt").val(),t.isBusy=!0;var i=await s.saveProduct(a);i&&i.isSucceed?(e.activedProduct=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.preview=function(e){t.preview("product",e,e.title,"modal-lg")}}]),app.factory("ProductServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.getProduct=async function(e,t){var i="/api/"+r.lang+"/product/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initProduct=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/product/init/"+e};return await a.getApiResult(t)},i.getProducts=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/product/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeProduct=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/product/delete/"+e};return await a.getApiResult(t)},i.saveProduct=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/product/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i}]),app.controller("RoleController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","RoleServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"CreatedDateTime",direction:"1",fromDate:null,toDate:null,keyword:""},e.activedRole=null,e.relatedRoles=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.role={name:""},e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.loadRole=async function(){t.isBusy=!0;var a=i.id,r=await s.getRole(a,"be");r.isSucceed?(e.activedRole=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadRoles=async function(a){void 0!==a&&(e.request.pageIndex=a),t.isBusy=!0;var i=await s.getRoles(e.request);i&&i.isSucceed?(e.data=i.data,$.each(e.data.items,function(t,a){$.each(e.data,function(e,t){t.roleId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.removeRole=function(a){t.showConfirm(e,"removeRoleConfirmed",[a],null,"Remove Role","Are you sure")},e.removeRoleConfirmed=async function(a){t.isBusy=!0,(await s.removeRole(a)).isSucceed?e.loadRoles():(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.createRole=async function(){t.isBusy=!0;var a=await s.createRole(e.role.name);a.isSucceed?(e.role.name="",e.loadRoles()):(t.showMessage(a.errors),t.isBusy=!1,e.$apply())},e.saveRole=async function(a){t.isBusy=!0;var i=await s.saveRole(a);i&&i.isSucceed?(e.activedRole=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())}}]),app.factory("RoleServices",["$http","CommonServices",function(e,t){var a={};return a.getRoles=function(e){var a={method:"POST",url:"/api/role/list",data:e};return t.getApiResult(a)},a.getPermissions=async function(){var e={method:"GET",url:"/api/role/permissions"};return await t.getApiResult(e)},a.getRole=async function(e,a){var i="/api/role/details/"+a;e&&(i+="/"+e);var r={method:"GET",url:i};return await t.getApiResult(r)},a.updatePermission=async function(e){var a={method:"POST",url:"/api/role/update-permission",data:JSON.stringify(e)};return await t.getApiResult(a)},a.saveRole=async function(e){var a={method:"POST",url:"/api/role/save",data:JSON.stringify(e)};return await t.getApiResult(a)},a.createRole=function(e){var a={method:"POST",url:"/api/role/create",data:JSON.stringify(e)};return t.getApiResult(a)},a.removeRole=function(e){var a={method:"POST",url:"/api/role/delete",data:JSON.stringify(e)};return t.getApiResult(a)},a}]),app.factory("MediaServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.getMedia=async function(e,t){var i="/api/"+r.lang+"/media/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initMedia=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/media/init/"+e};return await a.getApiResult(t)},i.getMedias=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/media/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeMedia=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/media/delete/"+e};return await a.getApiResult(t)},i.saveMedia=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/media/save",data:JSON.stringify(e)};return await a.getApiResult(t)},i.uploadMedia=async function(e){if(void 0!==e.file&&null!==e.file){var t=new FormData;t.append(e.file.name,e.file),t.append("fileFolder",e.folder),t.append("title",e.title),t.append("description",e.description);var i={url:"/api/"+r.lang+"/media/upload",type:"POST",headers:{"Content-Type":"multipart/form-data"},contentType:!1,processData:!1,data:t};return await a.getApiResult(i)}},i}]),app.controller("ThemeController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","ThemeServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"Priority",direction:"0",fromDate:null,toDate:null,keyword:""},e.activedTheme=null,e.relatedThemes=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.getTheme=async function(a){t.isBusy=!0;var i=await s.getTheme(a,"be");i&&i.isSucceed?(e.activedTheme=i.data,t.initEditor(),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.syncTemplates=async function(a){t.isBusy=!0;var i=await s.syncTemplates(a);i.isSucceed?(e.activedTheme=i.data,t.isBusy=!1,e.$apply()):(t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.loadTheme=async function(){t.isBusy=!0;var a=i.id,r=await s.getTheme(a,"be");r.isSucceed?(e.activedTheme=r.data,t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadThemes=async function(a){if(void 0!=a&&(e.request.pageIndex=a),null!=e.request.fromDate){var i=new Date(e.request.fromDate);e.request.fromDate=i.toISOString()}null!=e.request.toDate&&(e.request.toDate=e.request.toDate.toISOString()),t.isBusy=!0;var r=await s.getThemes(e.request);r&&r.isSucceed?(e.data=r.data,$.each(e.data.items,function(t,a){$.each(e.activedThemes,function(e,t){t.themeId==a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.saveTheme=async function(a){t.isBusy=!0;var i=await s.saveTheme(a);i&&i.isSucceed?(e.activedTheme=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,t.updateSettings(),o.path("/backend/theme/list"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.removeTheme=function(a){t.showConfirm(e,"removeThemeConfirmed",[a],null,"Remove Theme","Are you sure")},e.removeThemeConfirmed=async function(a){t.isBusy=!0,(await s.removeTheme(a)).isSucceed?e.loadThemes():(t.showMessage("failed"),t.isBusy=!1,e.$apply())}}]),app.factory("ThemeServices",["$http","$rootScope","CommonServices",function(e,t,a){var i={},r=t.settings;return i.syncTemplates=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/theme/sync/"+e};return await a.getApiResult(t,"")},i.getTheme=async function(e,t){var i="/api/"+r.lang+"/theme/details/"+t;e&&(i+="/"+e);var o={method:"GET",url:i};return await a.getApiResult(o)},i.initTheme=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/theme/init/"+e};return await a.getApiResult(t)},i.getThemes=async function(e){var t={method:"POST",url:"/api/"+r.lang+"/theme/list",data:JSON.stringify(e)};return await a.getApiResult(t)},i.removeTheme=async function(e){var t={method:"GET",url:"/api/"+r.lang+"/theme/delete/"+e};return await a.getApiResult(t)},i.saveTheme=async function(e){var i={method:"POST",url:"/api/"+t.settings.lang+"/theme/save",data:JSON.stringify(e)};return await a.getApiResult(i)},i}]),app.controller("UserController",["$scope","$rootScope","ngAppSettings","$routeParams","$timeout","$location","AuthService","UserServices",function(e,t,a,i,r,o,n,s){e.request={pageSize:"10",pageIndex:0,status:a.swStatus[1],orderBy:"CreatedDateTime",direction:"1",fromDate:null,toDate:null,keyword:""},e.mediaFile={file:null,fullPath:"",folder:"User",title:"",description:""},e.activedUser=null,e.relatedUsers=[],t.isBusy=!1,e.data={pageIndex:0,pageSize:1,totalItems:0},e.errors=[],e.range=function(e){for(var t=[],a=1;a<=e;a+=1)t.push(a);return t},e.loadUser=async function(){t.isBusy=!0;var a=i.id,r=await s.getUser(a,"be");r.isSucceed?(e.activedUser=r.data,t.initEditor(),t.isBusy=!1,e.$apply()):(t.showErrors(r.errors),t.isBusy=!1,e.$apply())},e.loadUsers=async function(a){void 0!=a&&(e.request.pageIndex=a),t.isBusy=!0;var i=await s.getUsers(e.request);i&&i.isSucceed?(e.data=i.data,$.each(e.data.items,function(t,a){$.each(e.data,function(e,t){t.userId===a.id&&(a.isHidden=!0)})}),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.removeUser=function(a){t.showConfirm(e,"removeUserConfirmed",[a],null,"Remove User","Are you sure")},e.removeUserConfirmed=async function(a){t.isBusy=!0,(await s.removeUser(a)).isSucceed?e.loadUsers():(t.showMessage("failed"),t.isBusy=!1,e.$apply())},e.saveUser=async function(a){t.isBusy=!0;var i=await s.saveUser(a);i&&i.isSucceed?(t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.register=async function(a){t.isBusy=!0;var i=await s.register(a);i&&i.isSucceed?(e.activedUser=i.data,t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(i&&t.showErrors(i.errors),t.isBusy=!1,e.$apply())},e.updateRoleStatus=async function(a){var i={userId:a.userId,roleId:a.roleId,roleName:a.description,isUserInRole:a.isActived};t.isBusy=!0;var r=await s.updateRoleStatus(i);r&&r.isSucceed?(t.showMessage("Thành công","success"),t.isBusy=!1,e.$apply()):(r&&t.showErrors(r.errors),t.isBusy=!1,e.$apply())}}]),app.factory("UserServices",["$http","CommonServices","ngAppSettings",function(e,t,a){var i={},r="/api/account/",o=a.serviceBase;return i.importUsers=function(e){var a={method:"POST",url:r+"import-users",data:JSON.stringify({strBase64:e})};return t.getApiResult(a)},i.getUsers=function(e){var a={method:"POST",url:r+"list",data:e};return t.getApiResult(a)},i.getUser=async function(e,a){var i="/api/account/details/"+a;e&&(i+="/"+e);var r={method:"GET",url:i};return await t.getApiResult(r)},i.saveUser=async function(e){var a={method:"POST",url:"/api/account/save",data:JSON.stringify(e)};return await t.getApiResult(a)},i.register=async function(e){var a={method:"POST",url:"/api/account/register",data:JSON.stringify(e)};return await t.getApiResult(a)},i.removeUser=function(e){var a={method:"POST",url:r+"remove-user",data:JSON.stringify(e)};return t.getApiResult(a)},i.updateRoleStatus=function(e){var a={method:"POST",url:o+"/api/account/user-in-role",data:JSON.stringify(e)};return t.getApiResult(a)},i.getUserDemographicInfo=function(){var e={method:"GET",url:o+"/api/GetUserDemographicInfo"};return t.getApiResult(e)},i}]),app.component("moduleMain",{templateUrl:"/app-portal/pages/module/components/main/main.html",controller:["$rootScope",function(e){this.settings=e.settings}],bindings:{module:"="}}),app.component("articleGeneral",{templateUrl:"/app-portal/pages/article/components/general/articleGeneral.html",controller:function(e){var t=this;t.dataTypes=[{title:"String",value:0},{title:"Int",value:1},{title:"Image",value:2},{title:"Boolean",value:7}],t.configurations={core:{},plugins:{btnsDef:{image:{dropdown:["insertImage","upload","base64","noembed"],ico:"insertImage"}},btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del","underline"],["link"],["image"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["foreColor","backColor"],["preformatted"],["horizontalRule"],["fullscreen"]],plugins:{upload:{serverPath:"https://api.imgur.com/3/image",fileFieldName:"image",headers:{Authorization:"Client-ID 9e57cb1c4791cea"},urlPropertyName:"data.link"}}}},t.addProperty=function(e){$(".property").length;t.article.properties.push({priority:0,name:"",value:null,dataType:0})},t.initEditor=function(){setTimeout(function(){$.each($(".code-editor"),function(e,t){var a=$(this),i=ace.edit(t);a.hasClass("json")?i.session.setMode("ace/mode/json"):i.session.setMode("ace/mode/razor"),i.setTheme("ace/theme/chrome"),i.session.setUseWrapMode(!0),i.setOptions({maxLines:1/0}),i.getSession().on("change",function(e){$(a).parent().find(".code-content").val(i.getValue())})}),$.each($(".editor-content"),function(e,a){$(a).trumbowyg(t.configurations.plugins)})},200)}},bindings:{article:"=",onDelete:"&",onUpdate:"&"}}),app.component("articleMain",{templateUrl:"/app-portal/pages/article/components/main/articleMain.html",controller:["$rootScope","$scope","ngAppSettings",function(e,t){var a=this;a.generateSEO=function(){a.article.id||(a.article.seoName=e.generateKeyword(a.article.title,"-")),a.article.id||(a.article.urlAlias.alias=e.generateKeyword(a.article.title,"-")),t.$apply()}}],bindings:{article:"=",onDelete:"&",onUpdate:"&"}}),app.component("articleMedias",{templateUrl:"/app-portal/pages/article/components/medias/articleMedias.html",controller:function(){var e=this;e.activeMedia=function(t){var a=null;null==e.article.mediaNavs&&(e.article.mediaNavs=[]),$.each(e.article.mediaNavs,function(e,i){if(i.mediaId==t.id)return i.isActived=t.isActived,a=i,!1}),null==a&&(a={description:"undefined"!=t.description?t.description:"",image:t.fullPath,mediaId:t.id,article:e.article.id,specificulture:t.specificulture,position:0,priority:e.article.mediaNavs.length+1,isActived:!0},t.isHidden=!0,e.article.mediaNavs.push(a))}},bindings:{article:"=",medias:"=",loadMedia:"&",onDelete:"&",onUpdate:"&"}}),app.component("articleModules",{templateUrl:"/app-portal/pages/article/components/modules/articleModules.html",bindings:{article:"=",onDelete:"&",onUpdate:"&"}}),app.component("articleParents",{templateUrl:"/app-portal/pages/article/components/parents/articleParents.html",bindings:{article:"=",onDelete:"&",onUpdate:"&"}}),app.component("articleRelated",{templateUrl:"/app-portal/pages/article/components/related/articleRelated.html",controller:function(){var e=this;e.activeArticle=function(t){var a=null;$.each(e.article.articleNavs,function(e,i){if(i.relatedArticleId==t.id)return i.isActived=t.isActived,a=i,!1}),null==a&&(a={relatedArticleId:t.id,sourceArticleId:e.article.id,specificulture:e.article.specificulture,priority:e.article.articleNavs.length+1,relatedArticle:t,isActived:!0},t.isHidden=!0,e.article.articleNavs.push(a))}},bindings:{article:"=",list:"=",onDelete:"&",onUpdate:"&"}}),app.component("articleSeo",{templateUrl:"/app-portal/pages/article/components/seo/articleSeo.html",bindings:{article:"=",onDelete:"&",onUpdate:"&"}}),app.component("moduleMain",{templateUrl:"/app-portal/pages/module/components/main/main.html",controller:["$rootScope",function(e){var t=this;t.gennerateName=function(){t.module.id&&null!==t.module.name&&""!==t.module.name||(t.module.name=e.generateKeyword(t.module.title,"_"))}}],bindings:{module:"="}}),app.component("pageGeneral",{templateUrl:"/app-portal/pages/page/components/general/general.html",controller:function(e){var t=this;t.dataTypes=[{title:"String",value:0},{title:"Int",value:1},{title:"Image",value:2},{title:"Boolean",value:7}],t.configurations={core:{},plugins:{btnsDef:{image:{dropdown:["insertImage","upload","base64","noembed"],ico:"insertImage"}},btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del","underline"],["link"],["image"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["foreColor","backColor"],["preformatted"],["horizontalRule"],["fullscreen"]],plugins:{upload:{serverPath:"https://api.imgur.com/3/image",fileFieldName:"image",headers:{Authorization:"Client-ID 9e57cb1c4791cea"},urlPropertyName:"data.link"}}}},t.addProperty=function(e){$(".property").length;t.page.properties.push({priority:0,name:"",value:null,dataType:0})},t.initEditor=function(){setTimeout(function(){$.each($(".code-editor"),function(e,t){var a=$(this),i=ace.edit(t);a.hasClass("json")?i.session.setMode("ace/mode/json"):i.session.setMode("ace/mode/razor"),i.setTheme("ace/theme/chrome"),i.session.setUseWrapMode(!0),i.setOptions({maxLines:1/0}),i.getSession().on("change",function(e){$(a).parent().find(".code-content").val(i.getValue())})}),$.each($(".editor-content"),function(e,a){$(a).trumbowyg(t.configurations.plugins)})},200)}},bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("pageMain",{templateUrl:"/app-portal/pages/page/components/main/main.html",controller:["$rootScope","$scope","ngAppSettings",function(e,t){var a=this;a.settings=e.settings,a.setPageType=function(e){a.page.type=$index},a.generateSeo=function(){a.page&&(null!=a.page.seoName&&""!=a.page.seoName||(a.page.seoName=e.generateKeyword(a.page.title,"-")),null!=a.page.urlAlias.alias&&""!=a.page.urlAlias.alias||(a.page.urlAlias.alias=e.generateKeyword(a.page.title,"-")))}}],bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("pageModules",{templateUrl:"/app-portal/pages/page/components/modules/modules.html",bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("pageParents",{templateUrl:"/app-portal/pages/page/components/parents/parents.html",bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("pagePlugPlay",{templateUrl:"/app-portal/pages/page/components/plug-play/plug-play.html",bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("productRelated",{templateUrl:"/app-portal/pages/product/components/related/productRelated.html",controller:function(){var e=this;e.activeProduct=function(t){var a=null;$.each(e.product.productNavs,function(e,i){if(i.relatedProductId==t.id)return i.isActived=t.isActived,a=i,!1}),null==a&&(a={relatedProductId:t.id,sourceProductId:e.product.id,specificulture:e.product.specificulture,priority:e.product.productNavs.length+1,relatedProduct:t,isActived:!0},t.isHidden=!0,e.product.productNavs.push(a))}},bindings:{product:"=",list:"=",onDelete:"&",onUpdate:"&"}}),app.component("pageSeo",{templateUrl:"/app-portal/pages/page/components/seo/seo.html",bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("portalPageMain",{templateUrl:"/app-portal/pages/portal-page/components/main/main.html",controller:["$rootScope","$scope","ngAppSettings","$routeParams",function(e,t,a,i){var r=this;r.settings=e.settings,r.setPageType=function(e){r.page.type=$index},r.generateKeyword=function(e){i.id||(r.page.textKeyword="portal_"+e.replace(/[^a-zA-Z0-9]+/g,"_").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/([0-9])([^0-9])/g,"$1-$2").replace(/([^0-9])([0-9])/g,"$1-$2").replace(/-+/g,"_").toLowerCase())}}],bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("portalPageParents",{templateUrl:"/app-portal/pages/portal-page/components/parents/parents.html",bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("productGeneral",{templateUrl:"/app-portal/pages/product/components/general/productGeneral.html",controller:["$rootScope","$scope","ngAppSettings",function(e,t){var a=this;a.dataTypes=[{title:"String",value:0},{title:"Int",value:1},{title:"Image",value:2},{title:"Boolean",value:7}],a.configurations=ngAppSettings.editorConfigurations,a.addProperty=function(e){$(".property").length;a.product.properties.push({priority:0,name:"",value:null,dataType:0})},a.initEditor=e.initEditor,a.loadTags=function(e){return[]}}],bindings:{product:"=",onDelete:"&",onUpdate:"&"}}),app.component("portalPagePlugPlay",{templateUrl:"/app-portal/pages/portal-page/components/plug-play/plug-play.html",bindings:{page:"=",onDelete:"&",onUpdate:"&"}}),app.component("productMain",{templateUrl:"/app-portal/pages/product/components/main/productMain.html",controller:["$rootScope","$scope","ngAppSettings",function(e,t){var a=this;a.generateSEO=function(){a.product.id||(a.product.seoName=e.generateKeyword(a.product.title,"-")),a.product.id||(a.product.urlAlias.alias=e.generateKeyword(a.product.title,"-")),t.$apply()}}],bindings:{product:"=",onDelete:"&",onUpdate:"&"}}),app.component("productMedias",{templateUrl:"/app-portal/pages/product/components/medias/productMedias.html",controller:["$rootScope",function(e){var t=this;t.medias=e.medias,t.init=function(){e.medias&&angular.forEach(t.medias,function(e,a){e.isActived=void 0!==t.checkActived(e)})},t.checkActived=function(e){if(t.product.mediaNavs)return t.product.mediaNavs.find(function(t){return t.mediaId===e.id})},t.activeMedia=function(e){var a=null;null===t.product.mediaNavs&&(t.product.mediaNavs=[]),$.each(t.product.mediaNavs,function(t,i){if(i.mediaId===e.id)return i.isActived=e.isActived,a=i,!1}),null===a&&(a={description:"undefined"!==e.description?e.description:"",image:e.fullPath,mediaId:e.id,product:t.product.id,specificulture:e.specificulture,position:0,priority:t.product.mediaNavs.length+1,isActived:!0},e.isHidden=!0,t.product.mediaNavs.push(a))}}],bindings:{product:"=",medias:"=",loadMedia:"&",onDelete:"&",onUpdate:"&"}}),app.component("productModules",{templateUrl:"/app-portal/pages/product/components/modules/productModules.html",bindings:{product:"=",onDelete:"&",onUpdate:"&"}}),app.component("productParents",{templateUrl:"/app-portal/pages/product/components/parents/productParents.html",bindings:{product:"=",onDelete:"&",onUpdate:"&"}}),app.component("productRelated",{templateUrl:"/app-portal/pages/product/components/related/productRelated.html",controller:function(){var e=this;e.activeProduct=function(t){var a=null;$.each(e.product.productNavs,function(e,i){if(i.relatedProductId==t.id)return i.isActived=t.isActived,a=i,!1}),null==a&&(a={relatedProductId:t.id,sourceProductId:e.product.id,specificulture:e.product.specificulture,priority:e.product.productNavs.length+1,relatedProduct:t,isActived:!0},t.isHidden=!0,e.product.productNavs.push(a))}},bindings:{product:"=",list:"=",onDelete:"&",onUpdate:"&"}}),app.component("productSeo",{templateUrl:"/app-portal/pages/product/components/seo/productSeo.html",bindings:{product:"=",onDelete:"&",onUpdate:"&"}}),modules.component("rolePageNav",{templateUrl:"/app-portal/pages/role/components/role-page-navigation/role-page-navigations.html",controller:["$rootScope","$scope","ngAppSettings","RoleServices",function(e,t,a,i){var r=this;r.selected=null,r.updateOrders=function(e){r.data.splice(e,1);for(var t=0;t<r.data.length;t++)r.data[t].priority=t+1}}],bindings:{prefix:"=",page:"=",callback:"&"}});